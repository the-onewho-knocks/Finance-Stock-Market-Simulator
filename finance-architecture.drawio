<mxfile host="app.diagrams.net">
  <diagram name="Finance Simulation Architecture">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Client -->
        <mxCell id="client" value="Client&#10;(Web / Mobile / Postman)"
          style="rounded=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;"
          vertex="1" parent="1">
          <mxGeometry x="420" y="20" width="260" height="60" as="geometry"/>
        </mxCell>

        <!-- Router -->
        <mxCell id="router" value="Router&#10;(Chi Router)&#10;internal/routes"
          style="rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;"
          vertex="1" parent="1">
          <mxGeometry x="420" y="110" width="260" height="70" as="geometry"/>
        </mxCell>

        <!-- Middleware -->
        <mxCell id="middleware" value="Middleware&#10;Auth / Admin&#10;internal/middleware"
          style="rounded=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;"
          vertex="1" parent="1">
          <mxGeometry x="420" y="210" width="260" height="80" as="geometry"/>
        </mxCell>

        <!-- Handlers -->
        <mxCell id="handlers" value="Handlers&#10;internal/handlers"
          style="rounded=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;"
          vertex="1" parent="1">
          <mxGeometry x="420" y="320" width="260" height="70" as="geometry"/>
        </mxCell>

        <!-- Services -->
        <mxCell id="services" value="Services (Business Logic)&#10;internal/services"
          style="rounded=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;"
          vertex="1" parent="1">
          <mxGeometry x="420" y="420" width="300" height="80" as="geometry"/>
        </mxCell>

        <!-- Repositories -->
        <mxCell id="repos" value="Repositories&#10;internal/repositories (interfaces + pgx)"
          style="rounded=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=13;"
          vertex="1" parent="1">
          <mxGeometry x="120" y="540" width="320" height="80" as="geometry"/>
        </mxCell>

        <!-- Cache -->
        <mxCell id="cache" value="Cache&#10;Redis&#10;internal/cache"
          style="rounded=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=13;"
          vertex="1" parent="1">
          <mxGeometry x="760" y="540" width="260" height="80" as="geometry"/>
        </mxCell>

        <!-- PostgreSQL -->
        <mxCell id="postgres" value="PostgreSQL&#10;pgx"
          style="shape=cylinder;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=13;"
          vertex="1" parent="1">
          <mxGeometry x="150" y="660" width="260" height="90" as="geometry"/>
        </mxCell>

        <!-- External APIs -->
        <mxCell id="external" value="External Stock APIs&#10;internal/stockapi"
          style="rounded=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=13;"
          vertex="1" parent="1">
          <mxGeometry x="470" y="660" width="300" height="90" as="geometry"/>
        </mxCell>

        <!-- Redis -->
        <mxCell id="redis" value="Redis"
          style="shape=cylinder;fillColor=#f8cecc;strokeColor=#b85450;fontSize=13;"
          vertex="1" parent="1">
          <mxGeometry x="800" y="660" width="200" height="90" as="geometry"/>
        </mxCell>

        <!-- Edges -->
        <mxCell id="e1" edge="1" parent="1" source="client" target="router">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e2" edge="1" parent="1" source="router" target="middleware">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e3" edge="1" parent="1" source="middleware" target="handlers">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e4" edge="1" parent="1" source="handlers" target="services">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e5" edge="1" parent="1" source="services" target="repos">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e6" edge="1" parent="1" source="services" target="cache">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e7" edge="1" parent="1" source="repos" target="postgres">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e8" edge="1" parent="1" source="services" target="external">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e9" edge="1" parent="1" source="cache" target="redis">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
